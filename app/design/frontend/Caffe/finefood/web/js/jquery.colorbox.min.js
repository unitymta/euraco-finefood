!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(i),i}:t(jQuery)}(function(t){function e(e,i,n){var o=document.createElement(e);return i&&(o.id=X+i),n&&(o.style.cssText=n),t(o)}function i(){return window.innerHeight?window.innerHeight:t(window).height()}function n(e,i){i!==Object(i)&&(i={}),this.cache={},this.el=e,this.value=function(e){var n;return void 0===this.cache[e]&&(n=t(this.el).attr("data-cbox-"+e),void 0!==n?this.cache[e]=n:void 0!==i[e]?this.cache[e]=i[e]:void 0!==J[e]&&(this.cache[e]=J[e])),this.cache[e]},this.get=function(e){var i=this.value(e);return t.isFunction(i)?i.call(this.el,this):i}}function o(t){var e=H.length,i=(D+t)%e;return 0>i?e+i:i}function r(t,e){return Math.round((/%/.test(t)?("x"===e?k.width():i())/100:1)*parseInt(t,10))}function h(t,e){return t.get("photo")||t.get("photoRegex").test(e)}function a(t,e){return t.get("retinaUrl")&&window.devicePixelRatio>1?e.replace(t.get("photoRegex"),t.get("retinaSuffix")):e}function s(t){"contains"in w[0]&&!w[0].contains(t.target)&&t.target!==m[0]&&(t.stopPropagation(),w.focus())}function d(t){d.str!==t&&(w.add(m).removeClass(d.str).addClass(t),d.str=t)}function l(e){D=0,e&&e!==!1&&"nofollow"!==e?(H=t("."+Y).filter(function(){var i=t.data(this,V),o=new n(this,i);return o.get("rel")===e}),D=H.index(P.el),-1===D&&(H=H.add(P.el),D=H.length-1)):H=t(P.el)}function c(e){t(document).trigger(e),rt.triggerHandler(e)}function u(i){var o;if(!U){if(o=t(i).data(V),P=new n(i,o),l(P.get("rel")),!z){z=A=!0,d(P.get("className")),w.css({visibility:"hidden",display:"block",opacity:""}),W=e(ht,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),y.css({width:"",height:""}).append(W),B=x.height()+C.height()+y.outerHeight(!0)-y.height(),O=b.width()+T.width()+y.outerWidth(!0)-y.width(),q=W.outerHeight(!0),_=W.outerWidth(!0);var h=r(P.get("initialWidth"),"x"),a=r(P.get("initialHeight"),"y"),u=P.get("maxWidth"),g=P.get("maxHeight");P.w=Math.max((u!==!1?Math.min(h,r(u,"x")):h)-_-O,0),P.h=Math.max((g!==!1?Math.min(a,r(g,"y")):a)-q-B,0),W.css({width:"",height:P.h}),G.position(),c(Z),P.get("onOpen"),K.add(M).hide(),w.focus(),P.get("trapFocus")&&document.addEventListener&&(document.addEventListener("focus",s,!0),rt.one(nt,function(){document.removeEventListener("focus",s,!0)})),P.get("returnFocus")&&rt.one(nt,function(){t(P.el).focus()})}var f=parseFloat(P.get("opacity"));m.css({opacity:f===f?f:"",cursor:P.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),P.get("closeButton")?S.html(P.get("close")).appendTo(y):S.appendTo("<div/>"),p()}}function g(){w||(Q=!1,k=t(window),w=e(ht).attr({id:V,"class":t.support.opacity===!1?X+"IE":"",role:"dialog",tabindex:"-1"}).hide(),m=e(ht,"Overlay").hide(),I=t([e(ht,"LoadingOverlay")[0],e(ht,"LoadingGraphic")[0]]),v=e(ht,"Wrapper"),y=e(ht,"Content").append(M=e(ht,"Title"),L=e(ht,"Current"),R=t('<button type="button"/>').attr({id:X+"Previous"}),F=t('<button type="button"/>').attr({id:X+"Next"}),j=t('<button type="button"/>').attr({id:X+"Slideshow"}),I),S=t('<button type="button"/>').attr({id:X+"Close"}),v.append(e(ht).append(e(ht,"TopLeft"),x=e(ht,"TopCenter"),e(ht,"TopRight")),e(ht,!1,"clear:left").append(b=e(ht,"MiddleLeft"),y,T=e(ht,"MiddleRight")),e(ht,!1,"clear:left").append(e(ht,"BottomLeft"),C=e(ht,"BottomCenter"),e(ht,"BottomRight"))).find("div div").css({"float":"left"}),E=e(ht,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),K=F.add(R).add(L).add(j)),document.body&&!w.parent().length&&t(document.body).append(m,w.append(v,E))}function f(){function e(t){t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey||(t.preventDefault(),u(this))}return w?(Q||(Q=!0,F.click(function(){G.next()}),R.click(function(){G.prev()}),S.click(function(){G.close()}),m.click(function(){P.get("overlayClose")&&G.close()}),t(document).bind("keydown."+X,function(t){var e=t.keyCode;z&&P.get("escKey")&&27===e&&(t.preventDefault(),G.close()),z&&P.get("arrowKey")&&H[1]&&!t.altKey&&(37===e?(t.preventDefault(),R.click()):39===e&&(t.preventDefault(),F.click()))}),t.isFunction(t.fn.on)?t(document).on("click."+X,"."+Y,e):t("."+Y).live("click."+X,e)),!0):!1}function p(){var i,n,o,s=G.prep,d=++at;if(A=!0,N=!1,c(ot),c(tt),P.get("onLoad"),P.h=P.get("height")?r(P.get("height"),"y")-q-B:P.get("innerHeight")&&r(P.get("innerHeight"),"y"),P.w=P.get("width")?r(P.get("width"),"x")-_-O:P.get("innerWidth")&&r(P.get("innerWidth"),"x"),P.mw=P.w,P.mh=P.h,P.get("maxWidth")&&(P.mw=r(P.get("maxWidth"),"x")-_-O,P.mw=P.w&&P.w<P.mw?P.w:P.mw),P.get("maxHeight")&&(P.mh=r(P.get("maxHeight"),"y")-q-B,P.mh=P.h&&P.h<P.mh?P.h:P.mh),i=P.get("href"),$=setTimeout(function(){I.show()},100),P.get("inline")){var l=t(i).eq(0);o=t("<div>").hide().insertBefore(l),rt.one(ot,function(){o.replaceWith(l)}),s(l)}else P.get("iframe")?s(" "):P.get("html")?s(P.get("html")):h(P,i)?(i=a(P,i),N=P.get("createImg"),t(N).addClass(X+"Photo").bind("error."+X,function(){s(e(ht,"Error").html(P.get("imgError")))}).one("load",function(){d===at&&setTimeout(function(){var e;P.get("retinaImage")&&window.devicePixelRatio>1&&(N.height=N.height/window.devicePixelRatio,N.width=N.width/window.devicePixelRatio),P.get("scalePhotos")&&(n=function(){N.height-=N.height*e,N.width-=N.width*e},P.mw&&N.width>P.mw&&(e=(N.width-P.mw)/N.width,n()),P.mh&&N.height>P.mh&&(e=(N.height-P.mh)/N.height,n())),P.h&&(N.style.marginTop=Math.max(P.mh-N.height,0)/2+"px"),H[1]&&(P.get("loop")||H[D+1])&&(N.style.cursor="pointer",t(N).bind("click."+X,function(){G.next()})),N.style.width=N.width+"px",N.style.height=N.height+"px",s(N)},1)}),N.src=i):i&&E.load(i,P.get("data"),function(i,n){d===at&&s("error"===n?e(ht,"Error").html(P.get("xhrError")):t(this).contents())})}var m,w,v,y,x,b,T,C,H,k,W,E,I,M,L,j,F,R,S,K,P,B,O,q,_,D,N,z,A,U,$,G,Q,J={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return t(this).attr("href")},title:function(){return this.title},createImg:function(){var e=new Image,i=t(this).data("cbox-img-attrs");return"object"==typeof i&&t.each(i,function(t,i){e[t]=i}),e},createIframe:function(){var e=document.createElement("iframe"),i=t(this).data("cbox-iframe-attrs");return"object"==typeof i&&t.each(i,function(t,i){e[t]=i}),"frameBorder"in e&&(e.frameBorder=0),"allowTransparency"in e&&(e.allowTransparency="true"),e.name=(new Date).getTime(),e.allowFullscreen=!0,e}},V="colorbox",X="cbox",Y=X+"Element",Z=X+"_open",tt=X+"_load",et=X+"_complete",it=X+"_cleanup",nt=X+"_closed",ot=X+"_purge",rt=t("<a/>"),ht="div",at=0,st={},dt=function(){function t(){clearTimeout(h)}function e(){(P.get("loop")||H[D+1])&&(t(),h=setTimeout(G.next,P.get("slideshowSpeed")))}function i(){j.html(P.get("slideshowStop")).unbind(s).one(s,n),rt.bind(et,e).bind(tt,t),w.removeClass(a+"off").addClass(a+"on")}function n(){t(),rt.unbind(et,e).unbind(tt,t),j.html(P.get("slideshowStart")).unbind(s).one(s,function(){G.next(),i()}),w.removeClass(a+"on").addClass(a+"off")}function o(){r=!1,j.hide(),t(),rt.unbind(et,e).unbind(tt,t),w.removeClass(a+"off "+a+"on")}var r,h,a=X+"Slideshow_",s="click."+X;return function(){r?P.get("slideshow")||(rt.unbind(it,o),o()):P.get("slideshow")&&H[1]&&(r=!0,rt.one(it,o),P.get("slideshowAuto")?i():n(),j.show())}}();t[V]||(t(g),G=t.fn[V]=t[V]=function(e,i){var o,r=this;return e=e||{},t.isFunction(r)&&(r=t("<a/>"),e.open=!0),r[0]?(g(),f()&&(i&&(e.onComplete=i),r.each(function(){var i=t.data(this,V)||{};t.data(this,V,t.extend(i,e))}).addClass(Y),o=new n(r[0],e),o.get("open")&&u(r[0])),r):r},G.position=function(e,n){function o(){x[0].style.width=C[0].style.width=y[0].style.width=parseInt(w[0].style.width,10)-O+"px",y[0].style.height=b[0].style.height=T[0].style.height=parseInt(w[0].style.height,10)-B+"px"}var h,a,s,d=0,l=0,c=w.offset();if(k.unbind("resize."+X),w.css({top:-9e4,left:-9e4}),a=k.scrollTop(),s=k.scrollLeft(),P.get("fixed")?(c.top-=a,c.left-=s,w.css({position:"fixed"})):(d=a,l=s,w.css({position:"absolute"})),l+=P.get("right")!==!1?Math.max(k.width()-P.w-_-O-r(P.get("right"),"x"),0):P.get("left")!==!1?r(P.get("left"),"x"):Math.round(Math.max(k.width()-P.w-_-O,0)/2),d+=P.get("bottom")!==!1?Math.max(i()-P.h-q-B-r(P.get("bottom"),"y"),0):P.get("top")!==!1?r(P.get("top"),"y"):Math.round(Math.max(i()-P.h-q-B,0)/2),w.css({top:c.top,left:c.left,visibility:"visible"}),v[0].style.width=v[0].style.height="9999px",h={width:P.w+_+O,height:P.h+q+B,top:d,left:l},e){var u=0;t.each(h,function(t){return h[t]!==st[t]?void(u=e):void 0}),e=u}st=h,e||w.css(h),w.dequeue().animate(h,{duration:e||0,complete:function(){o(),A=!1,v[0].style.width=P.w+_+O+"px",v[0].style.height=P.h+q+B+"px",P.get("reposition")&&setTimeout(function(){k.bind("resize."+X,G.position)},1),t.isFunction(n)&&n()},step:o})},G.resize=function(t){var e;z&&(t=t||{},t.width&&(P.w=r(t.width,"x")-_-O),t.innerWidth&&(P.w=r(t.innerWidth,"x")),W.css({width:P.w}),t.height&&(P.h=r(t.height,"y")-q-B),t.innerHeight&&(P.h=r(t.innerHeight,"y")),t.innerHeight||t.height||(e=W.scrollTop(),W.css({height:"auto"}),P.h=W.height()),W.css({height:P.h}),e&&W.scrollTop(e),G.position("none"===P.get("transition")?0:P.get("speed")))},G.prep=function(i){function r(){return P.w=P.w||W.width(),P.w=P.mw&&P.mw<P.w?P.mw:P.w,P.w}function s(){return P.h=P.h||W.height(),P.h=P.mh&&P.mh<P.h?P.mh:P.h,P.h}if(z){var l,u="none"===P.get("transition")?0:P.get("speed");W.remove(),W=e(ht,"LoadedContent").append(i),W.hide().appendTo(E.show()).css({width:r(),overflow:P.get("scrolling")?"auto":"hidden"}).css({height:s()}).prependTo(y),E.hide(),t(N).css({"float":"none"}),d(P.get("className")),l=function(){function e(){t.support.opacity===!1&&w[0].style.removeAttribute("filter")}var i,r,s=H.length;z&&(r=function(){clearTimeout($),I.hide(),c(et),P.get("onComplete")},M.html(P.get("title")).show(),W.show(),s>1?("string"==typeof P.get("current")&&L.html(P.get("current").replace("{current}",D+1).replace("{total}",s)).show(),F[P.get("loop")||s-1>D?"show":"hide"]().html(P.get("next")),R[P.get("loop")||D?"show":"hide"]().html(P.get("previous")),dt(),P.get("preloading")&&t.each([o(-1),o(1)],function(){var e,i=H[this],o=new n(i,t.data(i,V)),r=o.get("href");r&&h(o,r)&&(r=a(o,r),e=document.createElement("img"),e.src=r)})):K.hide(),P.get("iframe")?(i=P.get("createIframe"),P.get("scrolling")||(i.scrolling="no"),t(i).attr({src:P.get("href"),"class":X+"Iframe"}).one("load",r).appendTo(W),rt.one(ot,function(){i.src="//about:blank"}),P.get("fastIframe")&&t(i).trigger("load")):r(),"fade"===P.get("transition")?w.fadeTo(u,1,e):e())},"fade"===P.get("transition")?w.fadeTo(u,0,function(){G.position(0,l)}):G.position(u,l)}},G.next=function(){!A&&H[1]&&(P.get("loop")||H[D+1])&&(D=o(1),u(H[D]))},G.prev=function(){!A&&H[1]&&(P.get("loop")||D)&&(D=o(-1),u(H[D]))},G.close=function(){z&&!U&&(U=!0,z=!1,c(it),P.get("onCleanup"),k.unbind("."+X),m.fadeTo(P.get("fadeOut")||0,0),w.stop().fadeTo(P.get("fadeOut")||0,0,function(){w.hide(),m.hide(),c(ot),W.remove(),setTimeout(function(){U=!1,c(nt),P.get("onClosed")},1)}))},G.remove=function(){w&&(w.stop(),t[V].close(),w.stop(!1,!0).remove(),m.remove(),U=!1,w=null,t("."+Y).removeData(V).removeClass(Y),t(document).unbind("click."+X).unbind("keydown."+X))},G.element=function(){return t(P.el)},G.settings=J)});